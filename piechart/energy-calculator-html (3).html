<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tide Energy Calculator</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Work Sans', sans-serif;
            background: #FDF8F4;
            min-height: 100vh;
            color: #967259;
        }
        @font-face {
            font-family: 'Tide Serif';
            src: serif;
        }
        .card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .activity-btn {
            transition: all 0.3s ease;
        }
        .activity-btn.selected {
            background-color: #FDF1E4;
            border-color: #967259;
            color: #967259;
        }
        .energy-bar {
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body class="p-4">
    <!-- Header with Tide Logo -->
    <div class="text-center mb-8">
        <!-- Moon Phases with Tide Logo -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 200" class="w-full max-w-md mx-auto mb-6">
            <!-- Moon phases -->
            <g fill="#967259">
                <!-- Phase 1 -->
                <circle cx="100" cy="50" r="30" />
                <circle cx="115" cy="50" r="30" fill="#FFF" />
                
                <!-- Phase 2 -->
                <circle cx="250" cy="50" r="30" />
                <circle cx="265" cy="50" r="30" fill="#FFF" />
                
                <!-- Full Moon -->
                <circle cx="400" cy="50" r="30" />
                
                <!-- Phase 4 -->
                <circle cx="550" cy="50" r="30" />
                <circle cx="535" cy="50" r="30" fill="#FFF" />
                
                <!-- Phase 5 -->
                <circle cx="700" cy="50" r="30" />
                <circle cx="685" cy="50" r="30" fill="#FFF" />
            </g>
            
            <!-- Stars -->
            <g fill="#967259">
                <path d="M50 20l2 2-2 2-2-2z" />
                <path d="M750 30l2 2-2 2-2-2z" />
                <path d="M150 15l2 2-2 2-2-2z" />
                <path d="M650 25l2 2-2 2-2-2z" />
                <path d="M450 10l2 2-2 2-2-2z" />
            </g>
            
            <!-- Tide text -->
            <text x="400" y="150" text-anchor="middle" font-family="serif" font-size="48" fill="#967259">tide.</text>
        </svg>
        
        <h2 class="text-xl font-medium text-[#967259] mb-2">Energy Forecast</h2>
        <p id="dailyAffirmation" class="text-[#967259] italic px-6">Loading your daily affirmation...</p>
    </div>

    <!-- Sleep Input Section -->
    <div class="card p-6 mb-6">
        <h3 class="text-lg font-medium text-gray-700 mb-4">How did you sleep?</h3>
        
        <div class="space-y-4">
            <div class="space-y-2">
                <label class="flex items-center gap-2 text-amber-700">
                    <span>ğŸŒ™</span>
                    <span>Bedtime</span>
                </label>
                <input
                    type="time"
                    id="sleepTime"
                    class="w-full p-2 rounded border border-amber-200 focus:outline-none focus:ring-2 focus:ring-amber-500"
                >
            </div>

            <div class="space-y-2">
                <label class="flex items-center gap-2 text-amber-700">
                    <span>â˜€ï¸</span>
                    <span>Wake time</span>
                </label>
                <input
                    type="time"
                    id="wakeTime"
                    class="w-full p-2 rounded border border-amber-200 focus:outline-none focus:ring-2 focus:ring-amber-500"
                >
            </div>
            
            <div id="sleepDuration" class="text-center font-medium hidden">
                <span class="text-2xl text-amber-600">0</span>
                <span class="text-amber-600 ml-2">hours of sleep</span>
            </div>
        </div>
    </div>

    <!-- Wake Feeling Section -->
    <div class="card p-6 mb-6">
        <h3 class="text-lg font-medium text-gray-700 mb-4">How do you feel this morning?</h3>
        <div class="grid grid-cols-2 gap-3" id="wakeFeelings">
            <button class="activity-btn p-3 rounded-lg border text-left">
                âœ¨ Refreshed
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ˜Š Okay
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ˜´ Still Tired
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ˜« Exhausted
            </button>
        </div>
    </div>

    <!-- Today's Activities -->
    <div class="card p-6 mb-6">
        <h3 class="text-lg font-medium text-gray-700 mb-4">Today's Activities</h3>
        
        <!-- Work & Mental Load -->
        <h4 class="text-md font-medium text-[#967259] mb-2">Work & Study</h4>
        <div class="grid grid-cols-2 gap-3 mb-4">
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ’¼ Full Work Day
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ  Work from Home
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ“š Study Session
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ’» Screen Time 4h+
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ“ Exam/Deadline
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ¯ Project Planning
            </button>
        </div>

        <!-- Physical Activities -->
        <h4 class="text-md font-medium text-[#967259] mb-2">Physical Activities</h4>
        <div class="grid grid-cols-2 gap-3 mb-4">
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ’ª Gym Workout
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸƒâ€â™€ï¸ Running
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸŠâ€â™€ï¸ Swimming
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸš´â€â™€ï¸ Cycling
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ¾ Sports Game
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ’ƒ Dance Class
            </button>
        </div>

        <!-- Family & Social -->
        <h4 class="text-md font-medium text-[#967259] mb-2">Family & Social</h4>
        <div class="grid grid-cols-2 gap-3 mb-4">
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Time
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ¨ Kids Activities
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ· Social Gathering
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ‰ Party/Event
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ‘¥ Meeting New People
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ—£ï¸ Deep Conversations
            </button>
        </div>

        <!-- Gentle Movement -->
        <h4 class="text-md font-medium text-[#967259] mb-2">Gentle Movement</h4>
        <div class="grid grid-cols-2 gap-3 mb-4">
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸš¶â€â™€ï¸ Light Walk
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ§˜â€â™€ï¸ Yoga
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸŒ³ Nature Walk
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸŒº Gardening
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ§¹ Light Housework
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸª´ Home Organizing
            </button>
        </div>

        <!-- Creative & Hobbies -->
        <h4 class="text-md font-medium text-[#967259] mb-2">Creative & Hobbies</h4>
        <div class="grid grid-cols-2 gap-3 mb-4">
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ¨ Art/Drawing
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸµ Music Practice
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ“ Writing
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ“· Photography
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ§¶ Crafting
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ‘©â€ğŸ³ Cooking
            </button>
        </div>

        <!-- Recovery & Self-Care -->
        <h4 class="text-md font-medium text-[#967259] mb-2">Recovery & Self-Care</h4>
        <div class="grid grid-cols-2 gap-3 mb-4">
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ§˜ Meditation
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ“– Reading
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ› Relaxing Bath
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ’†â€â™€ï¸ Massage
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                â˜•ï¸ Mindful Break
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸŒŸ Rest Day
            </button>
        </div>

        <!-- Entertainment -->
        <h4 class="text-md font-medium text-[#967259] mb-2">Entertainment</h4>
        <div class="grid grid-cols-2 gap-3 mb-4">
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ® Gaming
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ¬ Movie/TV
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸµ Music Listening
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸª Event Attending
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ­ Theater/Show
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ¨ Museum Visit
            </button>
        </div>
    </div>

    <!-- Energy Score -->
    <div id="energyScore" class="card p-6 mb-6 hidden">
        <div class="text-center space-y-4">
            <h3 class="text-xl font-medium text-amber-900">Today's Energy Forecast</h3>
            <div class="text-5xl font-bold text-amber-600">
                <span id="scoreNumber">0</span>%
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
                <div id="energyBar" class="energy-bar h-3 rounded-full bg-amber-500" style="width: 0%"></div>
            </div>
            <p id="energyMessage" class="text-amber-700"></p>
        </div>
    </div>

    <!-- Energy Boost Section -->
    <div id="energyBoost" class="card p-6 mb-6 hidden">
        <h3 class="text-lg font-medium text-amber-800 mb-3">
            Energy Boost Options
            <span class="text-sm font-normal ml-2">Select what appeals to you</span>
        </h3>
        <div class="grid grid-cols-2 gap-3">
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ› Warm Bath/Jacuzzi
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸŒ² Nature Walk
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ“” Journaling
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ§˜â€â™€ï¸ Gentle Yoga
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸ«– Calming Tea
            </button>
            <button class="activity-btn p-3 rounded-lg border text-left">
                ğŸµ Calming Music
            </button>
        </div>
    </div>

    <script>
        // Affirmations
        const affirmations = [
            "Every breath brings me peaceful energy âœ¨",
            "I honor my body's natural rhythms ğŸŒ™",
            "I choose activities that nourish my soul ğŸŒ¿",
            "My energy flows where my intention goes ğŸ’«",
            "I am in tune with my body's needs ğŸ§˜â€â™€ï¸",
            "Each day is a fresh start ğŸŒ…",
            "I listen to my body with compassion ğŸ’—"
        ];

        // Set random affirmation
        document.getElementById('dailyAffirmation').textContent = 
            affirmations[Math.floor(Math.random() * affirmations.length)];

        // Handle time inputs
        const sleepTime = document.getElementById('sleepTime');
        const wakeTime = document.getElementById('wakeTime');
        const sleepDuration = document.getElementById('sleepDuration');

        function calculateSleepHours() {
            if (!sleepTime.value || !wakeTime.value) return;

            let sleep = new Date(`2024-01-01 ${sleepTime.value}`);
            let wake = new Date(`2024-01-01 ${wakeTime.value}`);
            
            if (wake < sleep) {
                wake.setDate(wake.getDate() + 1);
            }
            
            const diff = (wake - sleep) / (1000 * 60 * 60);
            sleepDuration.classList.remove('hidden');
            sleepDuration.querySelector('span').textContent = Math.round(diff * 10) / 10;
            
            calculateEnergyScore();
        }

        sleepTime.addEventListener('change', calculateSleepHours);
        wakeTime.addEventListener('change', calculateSleepHours);

        // Handle button selections
        document.querySelectorAll('.activity-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                this.classList.toggle('selected');
                calculateEnergyScore();
            });
        });

        function calculateEnergyScore() {
            const sleepHours = parseFloat(sleepDuration.querySelector('span').textContent) || 0;
            const wakeButtons = document.querySelectorAll('#wakeFeelings .activity-btn');
            const selectedActivities = document.querySelectorAll('#activities .activity-btn.selected');
            
            let score = 0;
            
            // Sleep score (Base: 45 points)
            // Based on research showing sleep is the foundation of energy levels
            if (sleepHours >= 8) score += 45;
            else if (sleepHours >= 7) score += 40;
            else if (sleepHours >= 6) score += 25;
            else if (sleepHours >= 5) score += 15;
            else score += 5; // Severe sleep deprivation
            
            // Wake feeling score (Base: 35 points)
            // Morning alertness is a key predictor of daytime functioning
            const selectedFeeling = Array.from(wakeButtons).findIndex(btn => btn.classList.contains('selected'));
            switch(selectedFeeling) {
                case 0: // Refreshed
                    score += 35;
                    break;
                case 1: // Okay
                    score += 25;
                    break;
                case 2: // Still Tired
                    score += 10;
                    break;
                case 3: // Exhausted
                    score += 5;
                    break;
            }
            
            // Activity Load Impact (Base: 20 points)
            // Based on metabolic equivalent (MET) values and cognitive load research
            const activityScores = {
                // Work & Mental Load (High Cognitive Demand)
                'Full Work Day': -15,
                'Work from Home': -12,
                'Study Session': -12,
                'Screen Time 4h+': -10,
                'Exam/Deadline': -18,
                'Project Planning': -10,

                // Physical Activities (High Physical Demand)
                'Gym Workout': -12,
                'Running': -15,
                'Swimming': -12,
                'Cycling': -12,
                'Sports Game': -14,
                'Dance Class': -10,

                // Family & Social (Emotional Energy)
                'Family Time': -8,
                'Kids Activities': -12,
                'Social Gathering': -10,
                'Party/Event': -15,
                'Meeting New People': -12,
                'Deep Conversations': -10,

                // Gentle Movement (Moderate Energy Impact)
                'Light Walk': 5,
                'Yoga': 8,
                'Nature Walk': 10,
                'Gardening': -5,
                'Light Housework': -5,
                'Home Organizing': -8,

                // Creative & Hobbies (Varies by Engagement)
                'Art/Drawing': -5,
                'Music Practice': -8,
                'Writing': -8,
                'Photography': -6,
                'Crafting': -7,
                'Cooking': -6,

                // Recovery & Self-Care (Energy Restoration)
                'Meditation': 15,
                'Reading': 8,
                'Relaxing Bath': 12,
                'Massage': 15,
                'Mindful Break': 10,
                'Rest Day': 20,

                // Entertainment (Passive vs Active Engagement)
                'Gaming': -8,
                'Movie/TV': 5,
                'Music Listening': 8,
                'Event Attending': -10,
                'Theater/Show': -6,
                'Museum Visit': -8
            };
            
            let activityLoad = 0;
            let activityCount = 0;
            selectedActivities.forEach(activity => {
                const activityText = activity.textContent.trim().split(' ').slice(1).join(' ');
                activityLoad += activityScores[activityText] || -8;
                activityCount++;
            });
            
            // Cognitive reserve depletion factor
            // Research shows compounding fatigue with multiple demanding activities
            if (activityCount > 2) {
                activityLoad *= (1 + (activityCount - 2) * 0.2); // 20% worse per additional activity
            }
            
            // Cap activity impact
            activityLoad = Math.max(-20, Math.min(20, activityLoad));
            score += activityLoad;
            
            // Final adjustments
            // Sleep debt compounds the negative effects of activities
            if (sleepHours < 6 && activityLoad < 0) {
                score *= 0.8; // 20% overall reduction for sleep-deprived days with demanding activities
            }
            
            // Ensure final score is between 0 and 100
            score = Math.max(0, Math.min(100, Math.round(score)));
            
            // Ensure final score is between 0 and 100
            score = Math.max(0, Math.min(100, score));
            
            // Update UI
            const energyScore = document.getElementById('energyScore');
            const scoreNumber = document.getElementById('scoreNumber');
            const energyBar = document.getElementById('energyBar');
            const energyMessage = document.getElementById('energyMessage');
            const energyBoost = document.getElementById('energyBoost');
            
            energyScore.classList.remove('hidden');
            scoreNumber.textContent = score;
            energyBar.style.width = `${score}%`;
            
            if (score > 70) {
                energyMessage.textContent = 'âœ¨ Great energy levels today!';
                energyBar.className = 'energy-bar h-3 rounded-full bg-green-500';
                energyBoost.classList.add('hidden');
            } else if (score > 40) {
                energyMessage.textContent = 'ğŸŒŸ Moderate energy - pace yourself';
                energyBar.className = 'energy-bar h-3 rounded-full bg-amber-500';
                energyBoost.classList.add('hidden');
            } else {
                energyMessage.textContent = 'ğŸŒ™ Take it easy today and focus on self-care';
                energyBar.className = 'energy-bar h-3 rounded-full bg-red-500';
                energyBoost.classList.remove('hidden');
            }
        }
    </script>
</body>
</html>